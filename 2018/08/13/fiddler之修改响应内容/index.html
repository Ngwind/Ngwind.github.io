<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="吴文达的博客">
    <meta name="keyword"  content="测试">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        三、【fiddler】之修改响应内容 - Ngwind的博客 | Ngwind&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> What doesn&#39;t kill you,make you stronger. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>wenda wu</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AutoResponder的介绍"><span class="toc-text">AutoResponder的介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建AutoResponder规则"><span class="toc-text">创建AutoResponder规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Matching-Rules"><span class="toc-text">Matching Rules</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#字符串匹配"><span class="toc-text">字符串匹配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#不包含字符串匹配"><span class="toc-text">不包含字符串匹配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#完全匹配"><span class="toc-text">完全匹配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#正则表达式"><span class="toc-text">正则表达式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Action"><span class="toc-text">Action</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#filename"><span class="toc-text">filename</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#http-targetURL"><span class="toc-text">http://targetURL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#redir-http-targetURL"><span class="toc-text">*redir:http://targetURL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#bpu"><span class="toc-text">*bpu</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#bpafter"><span class="toc-text">*bpafter</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#delay"><span class="toc-text">*delay:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#header-Name-Value"><span class="toc-text">*header:Name=Value</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#flag-Name-Value"><span class="toc-text">*flag:Name=Value</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CORSPreflightAllow"><span class="toc-text">*CORSPreflightAllow</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#reset"><span class="toc-text">*reset</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#drop"><span class="toc-text">*drop</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#exit"><span class="toc-text">*exit</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Latency"><span class="toc-text">Latency</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最后"><span class="toc-text">最后</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> What doesn&#39;t kill you,make you stronger. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        三、【fiddler】之修改响应内容
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-08-13 12:01:10</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#fiddler" title="fiddler">fiddler</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>本节介绍使用fiddler的autoresponder来截获并且修改服务器的响应。</p>
<blockquote>
<p>参考文章：<a href="https://docs.telerik.com/fiddler/KnowledgeBase/AutoResponder" target="_blank" rel="noopener">https://docs.telerik.com/fiddler/KnowledgeBase/AutoResponder</a></p>
</blockquote>
<h3 id="AutoResponder的介绍"><a href="#AutoResponder的介绍" class="headerlink" title="AutoResponder的介绍"></a>AutoResponder的介绍</h3><p>Fiddler的AutoResponder选项卡允许您从本地磁盘返回文件，而不是将请求发送到服务器。</p>
<p>打开autoresponder选项，ui如图所示：</p>
<p><img src="/img/2018-08-13 155331.png" alt=""></p>
<ul>
<li>3个勾选框<ul>
<li>Enable rule 勾选此项表示规则生效</li>
<li>Unmatched request passthroght 勾选此项表示没有匹配上规则的请求可以通过</li>
<li>EnableLatency 勾选此项表示响应延迟设置生效</li>
</ul>
</li>
<li>2个按钮<ul>
<li>Add Rule 点击按钮新增一个规则</li>
<li>Import… 点击按钮导入本地已有规则</li>
</ul>
</li>
<li>规则列表 <ul>
<li>If request matches 显示匹配规则</li>
<li>then respond with 显示修改后的响应</li>
<li>Latency 显示延迟</li>
<li>Comments 显示备注</li>
</ul>
</li>
<li>规则编辑器<ul>
<li>rules 关键部分，匹配的规则。默认给出了很多种匹配规则</li>
<li>match 关键部分，匹配后对进行的操作</li>
<li>match only once</li>
<li>test 测试匹配效果</li>
<li>save 保存编辑内容</li>
</ul>
</li>
</ul>
<h4 id="创建AutoResponder规则"><a href="#创建AutoResponder规则" class="headerlink" title="创建AutoResponder规则"></a>创建AutoResponder规则</h4><p>废话少说，我们示范一个使用autoresponder修改百度页面图片的例子。</p>
<p>首先打开fiddler抓包，然后在浏览器中打开<code>www.baidu.com</code>,之后在fiddler里就可以看到一些数据包了。</p>
<p><img src="/img/2018-08-13 170143.png" alt=""></p>
<p>查看这个请求的响应，是一个icon图片。把图片保存到本地，然后再进行一些修改。</p>
<p><img src="/img/2018-08-13 170459.ico" alt=""></p>
<p>接着，我们切换到autoresponder界面，把请求:<code>https://www.baidu.com/favicon.ico</code>拖拽到autoresponder界面（自己手动输入也行）。</p>
<p><img src="/img/2018-08-13 170813.jpg" alt=""></p>
<p>然后是关键的一步，修改请求内容。选择刚刚创建的rule，把响应改为使用本地文件：</p>
<p><img src="/img/2018-08-13 171006.png" alt=""></p>
<p>把之前修改的本地文件作为服务器响应文件：</p>
<p><img src="/img/2018-08-13 171046.png" alt=""></p>
<p>不要忘记点击save、勾选enable rule，并且清除一些浏览器缓存。接下来我们再访问一次<code>www.baidu.com</code>,观察页面显示情况。</p>
<p><img src="/img/2018-08-13 171522.jpg" alt=""></p>
<p>可以发现，百度页面的icon图成功替换成了我们本地的图片！</p>
<h4 id="Matching-Rules"><a href="#Matching-Rules" class="headerlink" title="Matching Rules"></a>Matching Rules</h4><h5 id="字符串匹配"><a href="#字符串匹配" class="headerlink" title="字符串匹配"></a>字符串匹配</h5><p>Fiddler将匹配字符串文字（不区分大小写）</p>
<h5 id="不包含字符串匹配"><a href="#不包含字符串匹配" class="headerlink" title="不包含字符串匹配"></a>不包含字符串匹配</h5><p>仅当字符串不匹配时才应用该规则</p>
<h5 id="完全匹配"><a href="#完全匹配" class="headerlink" title="完全匹配"></a>完全匹配</h5><p>Fiddler支持精确的，区分大小写的匹配语法，用于以exact开头的表达式</p>
<h5 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h5><p>Fiddler支持以正则表达式开头的表达式的正则表达式语法。<br>正则表达式将用于使用“操作”列中的字符串替换入站URL。<br>使用。+匹配一个或多个字符的序列，或。*匹配零个或多个字符。<br>在正则表达式的前面使用^表示“URL的开头”，并在正则表达式的尾部使用$表示“URL的结尾”。</p>
<h4 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h4><p>除了简单地返回文件，AutoResponder还可以执行特殊操作.</p>
<h5 id="filename"><a href="#filename" class="headerlink" title="filename"></a>filename</h5><p>返回文件名的内容作为响应。</p>
<h5 id="http-targetURL"><a href="#http-targetURL" class="headerlink" title="http://targetURL"></a><a href="http://targetURL" target="_blank" rel="noopener">http://targetURL</a></h5><p>返回targetURL的内容作为响应</p>
<h5 id="redir-http-targetURL"><a href="#redir-http-targetURL" class="headerlink" title="*redir:http://targetURL"></a>*redir:<a href="http://targetURL" target="_blank" rel="noopener">http://targetURL</a></h5><p>将HTTP重定向返回到目标URL。与简单的URL规则不同，这可以确保客户端知道其请求的位置，以便发送正确的cookie等。</p>
<h5 id="bpu"><a href="#bpu" class="headerlink" title="*bpu"></a>*bpu</h5><p>在发送到服务器之前中断请求。非最终行动。</p>
<h5 id="bpafter"><a href="#bpafter" class="headerlink" title="*bpafter"></a>*bpafter</h5><p>向服务器发送请求并中断响应。非最终行动。</p>
<h5 id="delay"><a href="#delay" class="headerlink" title="*delay:"></a>*delay:</h5><p>通过####毫秒来延迟向服务器发送请求。非最终行动。</p>
<h5 id="header-Name-Value"><a href="#header-Name-Value" class="headerlink" title="*header:Name=Value"></a>*header:Name=Value</h5><p>将具有给定Name的Request标头设置为指定值。如果不存在该名称的标头，则将创建新标头。非最终行动。</p>
<h5 id="flag-Name-Value"><a href="#flag-Name-Value" class="headerlink" title="*flag:Name=Value"></a>*flag:Name=Value</h5><p>将具有给定Name的会话标志设置为指定值。如果不存在该名称的标头，则将创建新标头。非最终行动。</p>
<h5 id="CORSPreflightAllow"><a href="#CORSPreflightAllow" class="headerlink" title="*CORSPreflightAllow"></a>*CORSPreflightAllow</h5><p>返回表示允许CORS的响应</p>
<h5 id="reset"><a href="#reset" class="headerlink" title="*reset"></a>*reset</h5><p>使用TCP / IP RST立即重置客户端连接到客户端</p>
<h5 id="drop"><a href="#drop" class="headerlink" title="*drop"></a>*drop</h5><p>不发生响应，马上关闭客户端连接</p>
<h5 id="exit"><a href="#exit" class="headerlink" title="*exit"></a>*exit</h5><p>终止进程</p>
<h4 id="Latency"><a href="#Latency" class="headerlink" title="Latency"></a>Latency</h4><p>你可以设置服务器响应的延迟时间，记得勾选Enable Latency。选择一个规则，然后右键点击-》set latency，就可以设置延时了。</p>
<p><img src="/img/2018-08-13 181344.png" alt=""></p>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>AutoResponder 是 Fiddler 比较重要且比较强大的功能之一。可用于拦截某一请求，并重定向到本地的资源，或者使用Fiddler的内置响应。可用于调试服务器端代码而无需修改服务器端的代码和配置，因为拦截和重定向后，实际上访问的是本地的文件或者得到的是Fiddler的内置响应。</p>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <div id="comment-container">
        </div>
    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/wu-wen-da-54">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank" href="http://weibo.com/6502350892">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank"  href="https://github.com/Ngwind">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/gitment.js"></script>
<script>
    var gitment = new Gitment({
        id: '三、【fiddler】之修改响应内容',
        owner: 'Ngwind',
        repo: 'Ngwind.github.io',
        oauth: {
            client_id: 'ec0f1527ca1d1cfb8bf8',
            client_secret: '5eafc4a4871101ebf8157a5e65fcb25fe2717683',
        },
    })
    gitment.render('comment-container')
</script>

</html>
